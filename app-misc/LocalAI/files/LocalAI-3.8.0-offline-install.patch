diff '--color=auto' -urp LocalAI-3.8.0.orig/backend/cpp/grpc/Makefile LocalAI-3.8.0/backend/cpp/grpc/Makefile
--- LocalAI-3.8.0.orig/backend/cpp/grpc/Makefile	2025-11-26 07:03:42.000000000 -0800
+++ LocalAI-3.8.0/backend/cpp/grpc/Makefile	2025-12-20 02:31:42.911275012 -0800
@@ -5,6 +5,7 @@ SYSTEM ?= $(HOST_SYSTEM)
 TAG_LIB_GRPC?=v1.59.0
 GIT_REPO_LIB_GRPC?=https://github.com/grpc/grpc.git
 GIT_CLONE_DEPTH?=1
+OFFLINE?=1
 
 INSTALLED_PACKAGES=installed_packages
 GRPC_REPO=grpc_repo
@@ -46,6 +47,7 @@ endif
 $(INSTALLED_PACKAGES): grpc_build
 
 $(GRPC_REPO):
+ifeq ($(OFFLINE),false)
 	mkdir -p $(GRPC_REPO)/grpc
 	cd $(GRPC_REPO)/grpc && \
 	git init && \
@@ -53,6 +55,7 @@ $(GRPC_REPO):
 	git fetch origin && \
 	git checkout $(TAG_LIB_GRPC) && \
 	git submodule update --init --recursive --depth 1 --single-branch
+endif
 	
 $(GRPC_BUILD): $(GRPC_REPO)
 	mkdir -p $(GRPC_BUILD)
diff '--color=auto' -urp LocalAI-3.8.0.orig/backend/cpp/llama-cpp/Makefile LocalAI-3.8.0/backend/cpp/llama-cpp/Makefile
--- LocalAI-3.8.0.orig/backend/cpp/llama-cpp/Makefile	2025-11-26 07:03:42.000000000 -0800
+++ LocalAI-3.8.0/backend/cpp/llama-cpp/Makefile	2025-12-20 02:31:41.919249831 -0800
@@ -1,6 +1,7 @@
 
 LLAMA_VERSION?=583cb83416467e8abf9b37349dcf1f6a0083745a
 LLAMA_REPO?=https://github.com/ggerganov/llama.cpp
+OFFLINE?=1
 
 CMAKE_ARGS?=
 BUILD_TYPE?=
@@ -127,6 +128,7 @@ llama-cpp-rpc-server: llama-cpp-grpc
 	cp -rf $(CURRENT_MAKEFILE_DIR)/../llama-cpp-grpc-build/llama.cpp/build/bin/rpc-server llama-cpp-rpc-server
 
 llama.cpp:
+ifeq ($(OFFLINE),false)
 	mkdir -p llama.cpp
 	cd llama.cpp && \
 	git init && \
@@ -134,6 +136,7 @@ llama.cpp:
 	git fetch origin && \
 	git checkout -b build $(LLAMA_VERSION) && \
 	git submodule update --init --recursive --depth 1 --single-branch
+endif
 
 llama.cpp/tools/grpc-server: llama.cpp
 	mkdir -p llama.cpp/tools/grpc-server
diff '--color=auto' -urp LocalAI-3.8.0.orig/backend/go/bark-cpp/Makefile LocalAI-3.8.0/backend/go/bark-cpp/Makefile
--- LocalAI-3.8.0.orig/backend/go/bark-cpp/Makefile	2025-11-26 07:03:42.000000000 -0800
+++ LocalAI-3.8.0/backend/go/bark-cpp/Makefile	2025-12-20 02:27:14.034248822 -0800
@@ -9,6 +9,7 @@ GOCMD=go
 # keep standard at C11 and C++11
 CXXFLAGS = -I. -I$(INCLUDE_PATH)/sources/bark.cpp/examples -I$(INCLUDE_PATH)/sources/bark.cpp/encodec.cpp/ggml/include -I$(INCLUDE_PATH)/sources/bark.cpp/spm-headers -I$(INCLUDE_PATH)/sources/bark.cpp -O3 -DNDEBUG -std=c++17 -fPIC
 LDFLAGS  = -L$(LIBRARY_PATH) -L$(LIBRARY_PATH)/sources/bark.cpp/build/examples -lbark -lstdc++ -lm
+OFFLINE?=1
 
 # bark.cpp
 BARKCPP_REPO?=https://github.com/PABannier/bark.cpp.git
@@ -19,10 +20,12 @@ CXXFLAGS += -Wall -Wextra -Wpedantic -Wc
 
 ## bark.cpp
 sources/bark.cpp:
+ifeq ($(OFFLINE),false)
 	git clone --recursive $(BARKCPP_REPO) sources/bark.cpp && \
 	cd sources/bark.cpp && \
 	git checkout $(BARKCPP_VERSION) && \
 	git submodule update --init --recursive --depth 1 --single-branch
+endif
 
 sources/bark.cpp/build/libbark.a: sources/bark.cpp
 	cd sources/bark.cpp && \
diff '--color=auto' -urp LocalAI-3.8.0.orig/backend/go/piper/Makefile LocalAI-3.8.0/backend/go/piper/Makefile
--- LocalAI-3.8.0.orig/backend/go/piper/Makefile	2025-11-26 07:03:42.000000000 -0800
+++ LocalAI-3.8.0/backend/go/piper/Makefile	2025-12-20 02:31:39.679232051 -0800
@@ -2,6 +2,7 @@
 # go-piper version
 PIPER_REPO?=https://github.com/mudler/go-piper
 PIPER_VERSION?=e10ca041a885d4a8f3871d52924b47792d5e5aa0
+OFFLINE?=1
 
 CURRENT_DIR=$(abspath ./)
 GOCMD=go
@@ -11,6 +12,7 @@ PIPER_CGO_LDFLAGS+=-L$(CURRENT_DIR)/sour
 
 ## go-piper
 sources/go-piper:
+ifeq ($(OFFLINE),false)
 	mkdir -p sources/go-piper
 	cd sources/go-piper && \
 	git init && \
@@ -18,6 +20,7 @@ sources/go-piper:
 	git fetch origin && \
 	git checkout $(PIPER_VERSION) && \
 	git submodule update --init --recursive --depth 1 --single-branch
+endif
 
 sources/go-piper/libpiper_binding.a: sources/go-piper
 	$(MAKE) -C sources/go-piper libpiper_binding.a example/main piper.o
diff '--color=auto' -urp LocalAI-3.8.0.orig/backend/go/stablediffusion-ggml/Makefile LocalAI-3.8.0/backend/go/stablediffusion-ggml/Makefile
--- LocalAI-3.8.0.orig/backend/go/stablediffusion-ggml/Makefile	2025-11-26 07:03:42.000000000 -0800
+++ LocalAI-3.8.0/backend/go/stablediffusion-ggml/Makefile	2025-12-20 02:27:14.035625190 -0800
@@ -5,6 +5,7 @@ NATIVE?=false
 GOCMD?=go
 GO_TAGS?=
 JOBS?=$(shell nproc --ignore=1)
+OFFLINE?=1
 
 # stablediffusion.cpp (ggml)
 STABLEDIFFUSION_GGML_REPO?=https://github.com/leejet/stable-diffusion.cpp
@@ -56,10 +57,12 @@ ifeq ($(BUILD_TYPE),sycl_f32)
 endif
 
 sources/stablediffusion-ggml.cpp:
+ifeq ($(OFFLINE),false)
 	git clone --recursive $(STABLEDIFFUSION_GGML_REPO) sources/stablediffusion-ggml.cpp && \
 	cd sources/stablediffusion-ggml.cpp && \
 	git checkout $(STABLEDIFFUSION_GGML_VERSION) && \
 	git submodule update --init --recursive --depth 1 --single-branch
+endif
 
 libgosd.so: sources/stablediffusion-ggml.cpp CMakeLists.txt gosd.cpp gosd.h
 	mkdir -p build && \
diff '--color=auto' -urp LocalAI-3.8.0.orig/backend/go/whisper/Makefile LocalAI-3.8.0/backend/go/whisper/Makefile
--- LocalAI-3.8.0.orig/backend/go/whisper/Makefile	2025-11-26 07:03:42.000000000 -0800
+++ LocalAI-3.8.0/backend/go/whisper/Makefile	2025-12-20 02:31:40.863282278 -0800
@@ -10,6 +10,7 @@ JOBS?=$(shell nproc --ignore=1)
 WHISPER_REPO?=https://github.com/ggml-org/whisper.cpp
 WHISPER_CPP_VERSION?=19ceec8eac980403b714d603e5ca31653cd42a3f
 SO_TARGET?=libgowhisper.so
+OFFLINE?=1
 
 CMAKE_ARGS+=-DBUILD_SHARED_LIBS=OFF
 
@@ -50,6 +51,7 @@ ifeq ($(BUILD_TYPE),sycl_f32)
 endif
 
 sources/whisper.cpp:
+ifeq ($(OFFLINE),false)
 	mkdir -p sources/whisper.cpp
 	cd sources/whisper.cpp && \
 	git init && \
@@ -57,6 +59,7 @@ sources/whisper.cpp:
 	git fetch origin && \
 	git checkout $(WHISPER_CPP_VERSION) && \
 	git submodule update --init --recursive --depth 1 --single-branch
+endif
 
 # Detect OS
 UNAME_S := $(shell uname -s)
diff '--color=auto' -urp LocalAI-3.8.0.orig/Makefile LocalAI-3.8.0/Makefile
--- LocalAI-3.8.0.orig/Makefile	2025-11-26 07:03:42.000000000 -0800
+++ LocalAI-3.8.0/Makefile	2025-12-20 02:27:14.035942796 -0800
@@ -11,6 +11,7 @@ export BUILD_TYPE?=
 GO_TAGS?=
 BUILD_ID?=
 NATIVE?=false
+OFFLINE?=1
 
 TEST_DIR=/tmp/test
 
@@ -237,6 +238,7 @@ help: ## Show this help.
 protogen: protogen-go
 
 protoc:
+ifeq ($(OFFLINE),false)
 	@OS_NAME=$$(uname -s | tr '[:upper:]' '[:lower:]'); \
 	ARCH_NAME=$$(uname -m); \
 	if [ "$$OS_NAME" = "darwin" ]; then \
@@ -267,12 +269,18 @@ protoc:
 	URL=https://github.com/protocolbuffers/protobuf/releases/download/v31.1/$$FILE; \
 	curl -L -s $$URL -o protoc.zip && \
 	unzip -j -d $(CURDIR) protoc.zip bin/protoc && rm protoc.zip
+endif
 
 .PHONY: protogen-go
 protogen-go: protoc install-go-tools
 	mkdir -p pkg/grpc/proto
+ifeq ($(OFFLINE),false)
 	./protoc --experimental_allow_proto3_optional -Ibackend/ --go_out=pkg/grpc/proto/ --go_opt=paths=source_relative --go-grpc_out=pkg/grpc/proto/ --go-grpc_opt=paths=source_relative \
     backend/backend.proto
+else
+	protoc --experimental_allow_proto3_optional -Ibackend/ --go_out=pkg/grpc/proto/ --go_opt=paths=source_relative --go-grpc_out=pkg/grpc/proto/ --go-grpc_opt=paths=source_relative \
+    backend/backend.proto
+endif
 
 .PHONY: protogen-go-clean
 protogen-go-clean:
