--- hip-rocm-6.4.4/cmake/FindHIP/run_hipcc.cmake.orig	2025-12-07 11:51:01.971975807 -0800
+++ hip-rocm-6.4.4/cmake/FindHIP/run_hipcc.cmake	2025-12-07 12:26:26.786345703 -0800
@@ -40,6 +40,25 @@ if(NOT generated_file)
     message(FATAL_ERROR "You must specify generated_file on the command line")
 endif()
 
+if(DEFINED ENV{FEATURES})
+  string(FIND "$ENV{FEATURES}" "ccache" CCACHE_IN_FEATURES)
+  if(CCACHE_IN_FEATURES GREATER -1)
+    find_program(CCACHE_PROGRAM ccache)
+    if(CCACHE_PROGRAM AND NOT __CC MATCHES "ccache")
+      set(__CC "${CCACHE_PROGRAM} ${__CC}")
+      message(STATUS "HIP kernel compilation: ccache enabled (FEATURES=ccache)")
+    endif()
+  endif()
+endif()
+
+# Verbose mode â€“ print every command before executing
+if(NOT DEFINED HIP_VERBOSE_MAKEFILE)
+  set(HIP_VERBOSE_MAKEFILE ON)   # change to OFF to silence
+endif()
+if(HIP_VERBOSE_MAKEFILE)
+  execute_process(COMMAND ${CMAKE_COMMAND} -E echo "HIP compile: ${__CC} ${__CC_FLAGS} -c ${input} -o ${output}")
+endif()
+
 # Set these up as variables to make reading the generated file easier
 set(HIP_HIPCC_EXECUTABLE "@HIP_HIPCC_EXECUTABLE@") # path
 set(HIP_HIPCONFIG_EXECUTABLE "@HIP_HIPCONFIG_EXECUTABLE@") #path
