diff -urp hipfort-rocm-5.6.0.orig/bin/hipfc hipfort-rocm-5.6.0/bin/hipfc
--- hipfort-rocm-5.6.0.orig/bin/hipfc	2023-03-24 06:32:43.000000000 -0700
+++ hipfort-rocm-5.6.0/bin/hipfc	2023-08-19 02:07:46.684021053 -0700
@@ -61,8 +61,8 @@ function usage(){
    Options with values:       Defaults  
     -hipfort-compiler <bin>   $HIPFORT_COMPILER or gfortran
     -hipfort          <path>  $HIPFORT   or _HIPFORT_INSTALL_DIR_
-    -cuda-path         <path> $CUDA_PATH or /usr/local/cuda
-    -rocm-path         <path>  $ROCM_PATH  or /opt/rocm
+    -cuda-path         <path> $CUDA_PATH or /opt/cuda
+    -rocm-path         <path>  $ROCM_PATH  or /usr
     -I         <include dir>  Provide one directory per -I option
     -O         <LLVM opt>     LLVM optimization level
     -o         <outfilename>  Default=a.out
@@ -151,7 +151,7 @@ function getdname(){
 function addrocmlib(){
   name=${1}
   libdir=""
-  for dir in "${ROCM_PATH}/lib" "${ROCM_PATH}/${name}/lib"; do
+  for dir in "${ROCM_PATH}/@LIBDIR@" ; do
     for ext in "so" "a"; do
   	if [ -f "${dir}/lib${name}.${ext}" ]; then
           libdir=${dir}
@@ -160,7 +160,7 @@ function addrocmlib(){
     done
   done
   if [[ -z ${libdir} ]]; then
-     echo "ERROR:  Library $name could not be found in $ROCM_PATH/lib/ or $ROCM_PATH/$name/lib/"
+     echo "ERROR:  Library $name could not be found in $ROCM_PATH/@LIBDIR@/"
      echo "        Please install $name"
      exit $DEADRC
   fi
@@ -265,8 +265,8 @@ cdir=$(getdname $0)
 [ ! -L "$cdir/hipfc" ] || cdir=$(getdname `readlink "$cdir/hipfc"`)
 HOW_CALLED=${0##*/}
 
-CUDA_PATH=${CUDA_PATH:-/usr/local/cuda}
-ROCM_PATH=${ROCM_PATH:-/opt/rocm}
+CUDA_PATH=${CUDA_PATH:-@EPREFIX@/opt/cuda}
+ROCM_PATH=${ROCM_PATH:-@EPREFIX@/usr}
 HIP_PLATFORM=${HIP_PLATFORM:-amd}
 
 HIPFORT=${HIPFORT:-_HIPFORT_INSTALL_DIR_}
@@ -325,15 +325,15 @@ else
    fi
    TARGET_TRIPLE=${TARGET_TRIPLE:-amdgcn-amd-amdhsa}
    TARGET_ARCH="amdgcn"
-   TARGET_LIBS="-L$ROCM_PATH/lib -lamdhip64 -Wl,-rpath=$ROCM_PATH/lib "
+   TARGET_LIBS="-L$ROCM_PATH/@LIBDIR@ -lamdhip64 -Wl,-rpath=$ROCM_PATH/@LIBDIR@ "
    HIPCC_ENV="HIP_PLATFORM=$HIP_PLATFORM"
    if [ -z ${HIP_CLANG_PATH+x} ]; then
-     HIPCC_ENV+=" HIP_CLANG_PATH=$ROCM_PATH/llvm/bin"
+     HIPCC_ENV+=" HIP_CLANG_PATH=$ROCM_PATH/lib/llvm/@LLVM_SLOT@/bin"
    fi 
    if [ -z ${DEVICE_LIB_PATH+x} ]; then
-     # Future versions of ROCm will install the device library in ROCM_PATH/amdgcn/bitcode
-     if [ -d $ROCM_PATH/amdgcn/bitcode ] ; then
-         HIPCC_ENV+=" DEVICE_LIB_PATH=$ROCM_PATH/amdgcn/bitcode"
+     # Future versions of ROCm will install the device library in ROCM_PATH/lib/amdgcn/bitcode
+     if [ -d $ROCM_PATH/lib/amdgcn/bitcode ] ; then
+         HIPCC_ENV+=" DEVICE_LIB_PATH=$ROCM_PATH/lib/amdgcn/bitcode"
      else
          HIPCC_ENV+=" DEVICE_LIB_PATH=$ROCM_PATH/lib"
      fi
@@ -417,7 +417,7 @@ if [ $GEN_OBJECT_ONLY ]  ; then
    HIPCC_OPTS=" -c $HIPCC_OPTS"
    LINKOPTS=""
 else
-   LINKOPTS="-L$HIPFORT/lib -lhipfort-$TARGET_ARCH"
+   LINKOPTS="-L$HIPFORT/@LIBDIR@ -lhipfort-$TARGET_ARCH"
    for lib in $ROCM_LIBS; do
      addrocmlib $lib
    done
