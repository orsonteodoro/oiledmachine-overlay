diff -urp rocMLIR-rocm-5.4.3.orig/mlir/tools/miopen-gen/CMakeLists.txt rocMLIR-rocm-5.4.3/mlir/tools/miopen-gen/CMakeLists.txt
--- rocMLIR-rocm-5.4.3.orig/mlir/tools/miopen-gen/CMakeLists.txt	2022-09-19 22:59:27.000000000 -0700
+++ rocMLIR-rocm-5.4.3/mlir/tools/miopen-gen/CMakeLists.txt	2023-08-06 02:41:01.248081128 -0700
@@ -1,6 +1,11 @@
-set(LLVM_LINK_COMPONENTS
-  Support
-  )
+#set(LLVM_LINK_COMPONENTS
+#  Support
+#  )
+
+find_library(LLVM_SUPPORT_LIB
+  libLLVMSupport.a LLVMSupport
+  PATHS /usr/lib/llvm/${LLVM_VERSION_MAJOR}/${CMAKE_INSTALL_LIBDIR}
+)
 
 get_property(dialect_libs GLOBAL PROPERTY MLIR_DIALECT_LIBS)
 get_property(conversion_libs GLOBAL PROPERTY MLIR_CONVERSION_LIBS)
@@ -43,5 +48,5 @@ add_llvm_executable(miopen-gen
 
 
 llvm_update_compile_flags(miopen-gen)
-target_link_libraries(miopen-gen PRIVATE ${LIBS})
+target_link_libraries(miopen-gen PRIVATE ${LIBS} ${LLVM_SUPPORT_LIB})
 mlir_check_link_libraries(miopen-gen)
diff -urp rocMLIR-rocm-5.4.3.orig/mlir/tools/miopen-lsp-server/CMakeLists.txt rocMLIR-rocm-5.4.3/mlir/tools/miopen-lsp-server/CMakeLists.txt
--- rocMLIR-rocm-5.4.3.orig/mlir/tools/miopen-lsp-server/CMakeLists.txt	2022-09-19 22:59:27.000000000 -0700
+++ rocMLIR-rocm-5.4.3/mlir/tools/miopen-lsp-server/CMakeLists.txt	2023-08-06 02:41:00.304081103 -0700
@@ -4,11 +4,16 @@ set(LLVM_OPTIONAL_SOURCES
 
 get_property(dialect_libs GLOBAL PROPERTY MLIR_DIALECT_LIBS)
 get_property(conversion_libs GLOBAL PROPERTY MLIR_CONVERSION_LIBS)
-set(LLVM_LINK_COMPONENTS
-  Core
-  Support
-  AsmParser
-  )
+#set(LLVM_LINK_COMPONENTS
+#  Core
+#  Support
+#  AsmParser
+#  )
+
+find_library(LLVM_SUPPORT_LIB
+  libLLVMSupport.a LLVMSupport
+  PATHS /usr/lib/llvm/${LLVM_VERSION_MAJOR}/${CMAKE_INSTALL_LIBDIR}
+)
 
 if(MLIR_INCLUDE_TESTS)
   set(test_libs
@@ -47,7 +52,7 @@ add_llvm_tool(miopen-lsp-server
   DEPENDS
   ${LIBS}
   )
-target_link_libraries(miopen-lsp-server PRIVATE ${LIBS})
+target_link_libraries(miopen-lsp-server PRIVATE ${LIBS} ${LLVM_SLOT_LIB} ${LLVM_SUPPORT_LIB})
 llvm_update_compile_flags(miopen-lsp-server)
 
 mlir_check_all_link_libraries(miopen-lsp-server)
diff -urp rocMLIR-rocm-5.4.3.orig/mlir/tools/miopen-opt/CMakeLists.txt rocMLIR-rocm-5.4.3/mlir/tools/miopen-opt/CMakeLists.txt
--- rocMLIR-rocm-5.4.3.orig/mlir/tools/miopen-opt/CMakeLists.txt	2022-09-19 22:59:27.000000000 -0700
+++ rocMLIR-rocm-5.4.3/mlir/tools/miopen-opt/CMakeLists.txt	2023-08-06 02:41:09.088081332 -0700
@@ -4,11 +4,21 @@ set(LLVM_OPTIONAL_SOURCES
 
 get_property(dialect_libs GLOBAL PROPERTY MLIR_DIALECT_LIBS)
 get_property(conversion_libs GLOBAL PROPERTY MLIR_CONVERSION_LIBS)
-set(LLVM_LINK_COMPONENTS
-  Core
-  Support
-  AsmParser
-  )
+#set(LLVM_LINK_COMPONENTS
+#  Core
+#  Support
+#  AsmParser
+#  )
+
+find_library(LLVM_SLOT_LIB
+  LLVM-${LLVM_VERSION_MAJOR}
+  PATHS /usr/lib/llvm/${LLVM_VERSION_MAJOR}/${CMAKE_INSTALL_LIBDIR}
+)
+
+find_library(LLVM_SUPPORT_LIB
+  libLLVMSupport.a LLVMSupport
+  PATHS /usr/lib/llvm/${LLVM_VERSION_MAJOR}/${CMAKE_INSTALL_LIBDIR}
+)
 
 if(MLIR_INCLUDE_TESTS)
   set(test_libs
@@ -68,7 +78,7 @@ add_llvm_tool(miopen-opt
   DEPENDS
   ${LIBS}
   )
-target_link_libraries(miopen-opt PRIVATE ${LIBS})
+target_link_libraries(miopen-opt PRIVATE ${LIBS} ${LLVM_SLOT_LIB} ${LLVM_SUPPORT_LIB})
 llvm_update_compile_flags(miopen-opt)
 
 mlir_check_all_link_libraries(miopen-opt)
diff -urp rocMLIR-rocm-5.4.3.orig/mlir/tools/miopen-translate/CMakeLists.txt rocMLIR-rocm-5.4.3/mlir/tools/miopen-translate/CMakeLists.txt
--- rocMLIR-rocm-5.4.3.orig/mlir/tools/miopen-translate/CMakeLists.txt	2022-09-19 22:59:27.000000000 -0700
+++ rocMLIR-rocm-5.4.3/mlir/tools/miopen-translate/CMakeLists.txt	2023-08-06 02:39:59.552079521 -0700
@@ -1,6 +1,11 @@
-set(LLVM_LINK_COMPONENTS
-  Support
-  )
+#set(LLVM_LINK_COMPONENTS
+#  Support
+#  )
+
+find_library(LLVM_SUPPORT_LIB
+  libLLVMSupport.a LLVMSupport
+  PATHS /usr/lib/llvm/${LLVM_VERSION_MAJOR}/${CMAKE_INSTALL_LIBDIR}
+)
 
 get_property(dialect_libs GLOBAL PROPERTY MLIR_DIALECT_LIBS)
 get_property(translation_libs GLOBAL PROPERTY MLIR_TRANSLATION_LIBS)
@@ -29,6 +34,7 @@ target_link_libraries(miopen-translate
   MLIRSupport
   MLIRROCDLToLLVMIRTranslation
   GpuModuleToRocdlirTranslation
+  ${LLVM_SUPPORT_LIB}
   )
 
 mlir_check_link_libraries(miopen-translate)
diff -urp rocMLIR-rocm-5.4.3.orig/mlir/tools/mlir-miopen-driver/CMakeLists.txt rocMLIR-rocm-5.4.3/mlir/tools/mlir-miopen-driver/CMakeLists.txt
--- rocMLIR-rocm-5.4.3.orig/mlir/tools/mlir-miopen-driver/CMakeLists.txt	2022-09-19 22:59:27.000000000 -0700
+++ rocMLIR-rocm-5.4.3/mlir/tools/mlir-miopen-driver/CMakeLists.txt	2023-08-06 02:41:10.976081381 -0700
@@ -1,6 +1,11 @@
-set(LLVM_LINK_COMPONENTS
-  Support
-  )
+#set(LLVM_LINK_COMPONENTS
+#  Support
+#  )
+
+find_library(LLVM_SUPPORT_LIB
+  libLLVMSupport.a LLVMSupport
+  PATHS /usr/lib/llvm/${LLVM_VERSION_MAJOR}/${CMAKE_INSTALL_LIBDIR}
+)
 
 get_property(dialect_libs GLOBAL PROPERTY MLIR_DIALECT_LIBS)
 get_property(conversion_libs GLOBAL PROPERTY MLIR_CONVERSION_LIBS)
@@ -42,7 +47,7 @@ add_llvm_executable(mlir-miopen-driver
 
 
 llvm_update_compile_flags(mlir-miopen-driver)
-target_link_libraries(mlir-miopen-driver PRIVATE ${LIBS})
+target_link_libraries(mlir-miopen-driver PRIVATE ${LIBS} ${LLVM_SUPPORT_LIB})
 mlir_check_link_libraries(mlir-miopen-driver)
 
 # Performance test scripts
