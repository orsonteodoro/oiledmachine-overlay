--- a/mlir/CMakeLists.txt.orig	2023-01-04 06:20:51.000000000 -0800
+++ b/mlir/CMakeLists.txt	2023-08-05 19:27:19.663403381 -0700
@@ -1,3 +1,9 @@
+set(LLVM_VERSION_MAJOR ${ELLVM_VERSION_MAJOR})
+message(STATUS "LLVM_VERSION_MAJOR = ${LLVM_VERSION_MAJOR}")
+set(LLVM_VERSION_MINOR ${ELLVM_VERSION_MINOR})
+set(LLVM_VERSION_PATCH ${ELLVM_VERSION_PATCH})
+set(LLVM_VERSION_SUFFIX ${ELLVM_VERSION_SUFFIX})
+set(CMAKE_INSTALL_RPATH "$ORIGIN/../${CMAKE_INSTALL_LIBDIR};$ORIGIN/../lib/llvm/${LLVM_VERSION_MAJOR}/${CMAKE_INSTALL_LIBDIR}")
 message(STATUS "LLVM_INCLUDE_DIRS: ${LLVM_INCLUDE_DIRS}")
 message(STATUS "MLIR_INCLUDE_DIRS: ${MLIR_INCLUDE_DIRS}")
 message(STATUS "LLVM_BUILD_LIBRARY_DIR: ${LLVM_BUILD_LIBRARY_DIR}")
