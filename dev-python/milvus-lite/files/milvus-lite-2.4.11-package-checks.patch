diff '--color=auto' -urp milvus-lite-2.4.11.orig/CMakeLists.txt milvus-lite-2.4.11/CMakeLists.txt
--- milvus-lite-2.4.11.orig/CMakeLists.txt	2024-12-24 19:32:57.000000000 -0800
+++ milvus-lite-2.4.11/CMakeLists.txt	2025-02-04 10:34:59.773244446 -0800
@@ -70,13 +70,20 @@ set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMA
 set(MILVUS_LITE True)
 
 include(FetchContent)
-
-set(CONAN_LIBS "${CONAN_LIBS};marisa::marisa;")
+find_package(PkgConfig REQUIRED)
 
 find_package(SQLiteCpp REQUIRED)
 include_directories(${SQLiteCpp_INCLUDE_DIRS})
 
-find_package(antlr4-runtime REQUIRED)
+find_path(antlr4-cppruntime_INCLUDES
+	NAMES "antlr4-runtime.h"
+	PATHS "/usr/include/antlr4-runtime"
+	REQUIRED)
+if(antlr4-cppruntime_INCLUDES-NOTFOUND)
+  message(FATAL_ERROR "Missing antlr4-runtime")
+else()
+  message(STATUS "antlr4-cppruntime_INCLUDES: ${antlr4-cppruntime_INCLUDES}")
+endif()
 include_directories(${antlr4-cppruntime_INCLUDES})
 
 find_package(Protobuf REQUIRED)
@@ -86,6 +93,10 @@ find_package(gRPC REQUIRED)
 include_directories(${gRPC_INCLUDE_DIRS})
 
 find_package(TBB REQUIRED)
+get_target_property(TBB_tbb_INCLUDE_DIRS TBB::tbb INTERFACE_INCLUDE_DIRECTORIES)
+get_target_property(TBB_tbb_LIBS TBB::tbb LINK_LIBRARIES)
+message(STATUS "TBB_tbb_INCLUDE_DIRS:  ${TBB_tbb_INCLUDE_DIRS}")
+#message(STATUS "TBB_tbb_LIBS:  ${TBB_tbb_LIBS}")
 include_directories(${TBB_tbb_INCLUDE_DIRS})
 
 find_package(nlohmann_json REQUIRED)
@@ -107,6 +118,11 @@ find_package(gflags REQUIRED)
 include_directories(${gflags_INCLUDE_DIRS})
 
 find_package(Arrow REQUIRED)
+get_target_property(ARROW_arrow_INCLUDE_DIRS Arrow::arrow_shared INTERFACE_INCLUDE_DIRECTORIES)
+get_target_property(ARROW_arrow_LIBS Arrow::arrow_shared INTERFACE_LINK_LIBRARIES)
+#message(STATUS "ARROW_arrow_INCLUDE_DIRS:  ${ARROW_arrow_INCLUDE_DIRS}")
+#message(STATUS "ARROW_arrow_LIBS:  ${ARROW_arrow_LIBS}")
+message(STATUS "arrow_INCLUDE_DIRS:  ${arrow_INCLUDE_DIRS}")
 include_directories(${arrow_INCLUDE_DIRS})
 
 find_package(re2 REQUIRED)
@@ -119,8 +135,11 @@ include_directories(${double-conversion_
 find_package(prometheus-cpp REQUIRED)
 include_directories(${prometheus-cpp_INCLUDE_DIRS})
 
-find_package(marisa REQUIRED)
-include_directories(${marisa_INCLUDE_DIRS})
+pkg_check_modules(MARISA REQUIRED marisa)
+message(STATUS "MARISA_INCLUDE_DIRS: ${MARISA_INCLUDE_DIRS}")
+include_directories(${MARISA_INCLUDE_DIRS})
+
+set(CONAN_LIBS "${CONAN_LIBS};${MARISA_LIBRARIES};")
 
 find_package(yaml-cpp REQUIRED)
 include_directories(${yaml-cpp_INCLUDE_DIRS})
diff '--color=auto' -urp milvus-lite-2.4.11.orig/cmake/milvus-storage.cmake milvus-lite-2.4.11/cmake/milvus-storage.cmake
--- milvus-lite-2.4.11.orig/cmake/milvus-storage.cmake	2024-12-24 19:32:57.000000000 -0800
+++ milvus-lite-2.4.11/cmake/milvus-storage.cmake	2025-02-04 10:34:28.177505472 -0800
@@ -16,8 +16,8 @@ file(GLOB_RECURSE SRC_FILES thirdparty/m
 add_library(milvus-storage ${SRC_FILES})
 target_include_directories(milvus-storage PUBLIC BEFORE thirdparty/milvus-storage/cpp/include/milvus-storage thirdparty/milvus-storage/cpp/src)
 target_link_libraries(milvus-storage PUBLIC
-    arrow::arrow
+    Arrow::arrow_shared
     Boost::boost
-    protobuf::protobuf
+    protobuf::libprotobuf
     glog::glog
 )
diff '--color=auto' -urp milvus-lite-2.4.11.orig/python/setup.py milvus-lite-2.4.11/python/setup.py
--- milvus-lite-2.4.11.orig/python/setup.py	2025-02-04 10:34:12.217637375 -0800
+++ milvus-lite-2.4.11/python/setup.py	2025-02-04 10:34:28.177505472 -0800
@@ -108,7 +108,7 @@ class CMakeBuild(_bdist_wheel):
                 # macos
                 subprocess.check_call(['conan', 'install', extdir, '--build=missing', '-s', 'build_type=Release'], cwd=build_temp, env=env)
         # build
-        subprocess.check_call(['cmake', extdir, '-DENABLE_UNIT_TESTS=OFF'], cwd=build_temp, env=env)
+        subprocess.check_call(['cmake', extdir, '-DENABLE_UNIT_TESTS=OFF', '-DTBB_DIR=/usr/lib64/cmake/TBB', '-DCMAKE_BUILD_TYPE=RelWithDebInfo'], cwd=build_temp, env=env)
         subprocess.check_call(['cmake', '--build', '.', '--', '-j4'],
                               cwd=build_temp,
                               env=env,
diff '--color=auto' -urp milvus-lite-2.4.11.orig/src/CMakeLists.txt milvus-lite-2.4.11/src/CMakeLists.txt
--- milvus-lite-2.4.11.orig/src/CMakeLists.txt	2024-12-24 19:32:57.000000000 -0800
+++ milvus-lite-2.4.11/src/CMakeLists.txt	2025-02-04 10:34:28.177505472 -0800
@@ -45,7 +45,7 @@ target_link_libraries(
   ${CONAN_LIBS}
   SQLiteCpp
   ${antlr4-cppruntime_LIBRARIES}
-  marisa::marisa
+  ${MARISA_LIBRARIES}
   TBB::tbb  
 )
 
diff '--color=auto' -urp milvus-lite-2.4.11.orig/thirdparty/milvus/internal/core/thirdparty/milvus-storage/milvus-storage_CMakeLists.txt milvus-lite-2.4.11/thirdparty/milvus/internal/core/thirdparty/milvus-storage/milvus-storage_CMakeLists.txt
--- milvus-lite-2.4.11.orig/thirdparty/milvus/internal/core/thirdparty/milvus-storage/milvus-storage_CMakeLists.txt	2024-04-30 05:41:27.000000000 -0700
+++ milvus-lite-2.4.11/thirdparty/milvus/internal/core/thirdparty/milvus-storage/milvus-storage_CMakeLists.txt	2025-02-04 10:34:28.177505472 -0800
@@ -23,7 +23,7 @@ file(GLOB_RECURSE SRC_FILES src/*.cpp sr
 message(STATUS "SRC_FILES: ${SRC_FILES}")
 add_library(milvus-storage ${SRC_FILES})
 target_include_directories(milvus-storage PUBLIC ${CMAKE_CURRENT_SOURCE_DIR}/include/milvus-storage ${CMAKE_CURRENT_SOURCE_DIR}/src)
-target_link_libraries(milvus-storage PUBLIC arrow::arrow arrow::parquet Boost::boost protobuf::protobuf AWS::aws-sdk-cpp-core glog::glog)
+target_link_libraries(milvus-storage PUBLIC Arrow::arrow_shared Boost::boost protobuf::libprotobuf AWS::aws-sdk-cpp-core glog::glog)
 if (USE_OPENDAL)
   target_link_libraries(milvus-storage PUBLIC opendal)
 endif()
diff '--color=auto' -urp milvus-lite-2.4.11.orig/thirdparty/milvus-storage/cpp/CMakeLists.txt milvus-lite-2.4.11/thirdparty/milvus-storage/cpp/CMakeLists.txt
--- milvus-lite-2.4.11.orig/thirdparty/milvus-storage/cpp/CMakeLists.txt	2024-02-06 00:38:18.000000000 -0800
+++ milvus-lite-2.4.11/thirdparty/milvus-storage/cpp/CMakeLists.txt	2025-02-04 10:34:28.177505472 -0800
@@ -27,7 +27,7 @@ set(LINK_LIBS
     arrow::libarrow
     arrow::libparquet
     Boost::boost
-    protobuf::protobuf
+    protobuf::libprotobuf
     glog::glog)
 
 if (WITH_OPENDAL)
