diff -urp rccl-rocm-5.1.3.orig/cmake/Dependencies.cmake rccl-rocm-5.1.3/cmake/Dependencies.cmake
--- rccl-rocm-5.1.3.orig/cmake/Dependencies.cmake	2022-04-27 08:36:16.000000000 -0700
+++ rccl-rocm-5.1.3/cmake/Dependencies.cmake	2023-08-21 11:29:18.705144280 -0700
@@ -60,10 +60,8 @@ if(NOT GTest_FOUND AND BUILD_TESTS OR IN
                      UPDATE_DISCONNECTED TRUE
     )
     set(GTEST_INCLUDE_DIRS ${CMAKE_CURRENT_BINARY_DIR}/gtest/include CACHE PATH "")
-    if(EXISTS ${CMAKE_CURRENT_BINARY_DIR}/gtest/lib)
-        set(GTEST_BOTH_LIBRARIES ${CMAKE_CURRENT_BINARY_DIR}/gtest/lib/libgtest.a;${CMAKE_CURRENT_BINARY_DIR}/gtest/lib/libgtest_main.a CACHE PATH "")
-    elseif(EXISTS ${CMAKE_CURRENT_BINARY_DIR}/gtest/lib64)
-        set(GTEST_BOTH_LIBRARIES ${CMAKE_CURRENT_BINARY_DIR}/gtest/lib64/libgtest.a;${CMAKE_CURRENT_BINARY_DIR}/gtest/lib64/libgtest_main.a CACHE PATH "")
+    if(EXISTS ${CMAKE_CURRENT_BINARY_DIR}/gtest/@LIBDIR@)
+        set(GTEST_BOTH_LIBRARIES ${CMAKE_CURRENT_BINARY_DIR}/gtest/@LIBDIR@/libgtest.a;${CMAKE_CURRENT_BINARY_DIR}/gtest/@LIBDIR@/libgtest_main.a CACHE PATH "")
     else()
         message(FATAL_ERROR "Cannot find gtest library installation path.")
     find_package(GTest REQUIRED CONFIG PATHS ${GTEST_ROOT})
diff -urp rccl-rocm-5.1.3.orig/CMakeLists.txt rccl-rocm-5.1.3/CMakeLists.txt
--- rccl-rocm-5.1.3.orig/CMakeLists.txt	2023-08-21 11:28:27.789143017 -0700
+++ rccl-rocm-5.1.3/CMakeLists.txt	2023-08-21 11:28:42.709143387 -0700
@@ -263,7 +263,7 @@ if("${HIP_COMPILER}" MATCHES "hcc")
 endif()
 
 target_include_directories(rccl PRIVATE ${ROCM_PATH}/rocm_smi/include)
-target_link_libraries(rccl PRIVATE hip::device dl -lrocm_smi64 -L${ROCM_PATH}/rocm_smi/lib)
+target_link_libraries(rccl PRIVATE hip::device dl -lrocm_smi64 -L${ROCM_PATH}/@LIBDIR@)
 target_link_libraries(rccl INTERFACE hip::host)
 
 #Setup librccl.so version
diff -urp rccl-rocm-5.1.3.orig/test/CMakeLists.txt rccl-rocm-5.1.3/test/CMakeLists.txt
--- rccl-rocm-5.1.3.orig/test/CMakeLists.txt	2023-08-21 11:28:27.793143017 -0700
+++ rccl-rocm-5.1.3/test/CMakeLists.txt	2023-08-21 11:28:42.709143387 -0700
@@ -73,9 +73,9 @@ if(BUILD_TESTS)
   # through -l and -L instead of command line input.
   if(BUILD_STATIC)
     add_dependencies(UnitTests rccl)
-    target_link_libraries(UnitTests PRIVATE dl rt numa -lrccl -L${CMAKE_BINARY_DIR} -lrocm_smi64 -L${ROCM_PATH}/rocm_smi/lib)
+    target_link_libraries(UnitTests PRIVATE dl rt numa -lrccl -L${CMAKE_BINARY_DIR} -lrocm_smi64 -L${ROCM_PATH}/@LIBDIR@)
     add_dependencies(UnitTestsMultiProcess rccl)
-    target_link_libraries(UnitTestsMultiProcess PRIVATE dl rt numa -lrccl -L${CMAKE_BINARY_DIR} -lrocm_smi64 -L${ROCM_PATH}/rocm_smi/lib)
+    target_link_libraries(UnitTestsMultiProcess PRIVATE dl rt numa -lrccl -L${CMAKE_BINARY_DIR} -lrocm_smi64 -L${ROCM_PATH}/@LIBDIR@)
   else()
     target_link_libraries(UnitTests PRIVATE rccl)
     target_link_libraries(UnitTestsMultiProcess PRIVATE rt rccl)
