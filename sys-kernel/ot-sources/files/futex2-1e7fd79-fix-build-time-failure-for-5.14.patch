--- a/kernel/futex2.c.orig	2021-09-23 14:01:31.791882761 -0700
+++ b/kernel/futex2.c	2021-09-23 14:02:03.258883798 -0700
@@ -298,7 +298,7 @@ again:
 		}
 
 		key->pointer = futex_get_inode_uuid(inode);
-		key->index = (unsigned long)basepage_index(tail);
+		key->index = (unsigned long)page_to_pgoff(tail);
 		key->offset |= FUT_OFF_INODE;
 
 		rcu_read_unlock();
