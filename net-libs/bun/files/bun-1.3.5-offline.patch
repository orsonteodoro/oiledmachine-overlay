diff '--color=auto' -urp bun-bun-v1.3.5.orig/cmake/Globals.cmake bun-bun-v1.3.5/cmake/Globals.cmake
--- bun-bun-v1.3.5.orig/cmake/Globals.cmake	2025-12-17 00:52:16.000000000 -0800
+++ bun-bun-v1.3.5/cmake/Globals.cmake	2025-12-24 13:29:32.995666755 -0800
@@ -701,6 +701,7 @@ function(register_repository)
       "Cloning ${GIT_NAME}"
     COMMAND
       ${CMAKE_COMMAND}
+        -DOFFLINE=${OFFLINE}
         -DGIT_PATH=${GIT_PATH}
         -DGIT_REPOSITORY=${GIT_REPOSITORY}
         -DGIT_NAME=${GIT_NAME}
Only in bun-bun-v1.3.5/cmake: Globals.cmake.rej
diff '--color=auto' -urp bun-bun-v1.3.5.orig/cmake/scripts/DownloadUrl.cmake bun-bun-v1.3.5/cmake/scripts/DownloadUrl.cmake
--- bun-bun-v1.3.5.orig/cmake/scripts/DownloadUrl.cmake	2025-12-17 00:52:16.000000000 -0800
+++ bun-bun-v1.3.5/cmake/scripts/DownloadUrl.cmake	2025-12-24 13:29:39.354377073 -0800
@@ -1,3 +1,6 @@
+if(OFFLINE)
+  return()
+endif()
 get_filename_component(SCRIPT_NAME ${CMAKE_CURRENT_LIST_FILE} NAME)
 message(STATUS "Running script: ${SCRIPT_NAME}")
 
diff '--color=auto' -urp bun-bun-v1.3.5.orig/cmake/scripts/DownloadZig.cmake bun-bun-v1.3.5/cmake/scripts/DownloadZig.cmake
--- bun-bun-v1.3.5.orig/cmake/scripts/DownloadZig.cmake	2025-12-17 00:52:16.000000000 -0800
+++ bun-bun-v1.3.5/cmake/scripts/DownloadZig.cmake	2025-12-24 13:29:39.354216144 -0800
@@ -42,25 +42,27 @@ endif()
 
 set(ZIG_DOWNLOAD_URL https://github.com/oven-sh/zig/releases/download/autobuild-${ZIG_COMMIT}/${ZIG_FILENAME})
 
-execute_process(
-  COMMAND
-    ${CMAKE_COMMAND}
-      -DDOWNLOAD_URL=${ZIG_DOWNLOAD_URL}
-      -DDOWNLOAD_PATH=${ZIG_PATH}
-      -P ${CMAKE_CURRENT_LIST_DIR}/DownloadUrl.cmake
-  ERROR_STRIP_TRAILING_WHITESPACE
-  ERROR_VARIABLE
-    ZIG_DOWNLOAD_ERROR
-  RESULT_VARIABLE
-    ZIG_DOWNLOAD_RESULT
-)
+if(NOT OFFLINE)
+  execute_process(
+    COMMAND
+      ${CMAKE_COMMAND}
+        -DDOWNLOAD_URL=${ZIG_DOWNLOAD_URL}
+        -DDOWNLOAD_PATH=${ZIG_PATH}
+        -P ${CMAKE_CURRENT_LIST_DIR}/DownloadUrl.cmake
+    ERROR_STRIP_TRAILING_WHITESPACE
+    ERROR_VARIABLE
+      ZIG_DOWNLOAD_ERROR
+    RESULT_VARIABLE
+      ZIG_DOWNLOAD_RESULT
+  )
 
-if(NOT ZIG_DOWNLOAD_RESULT EQUAL 0)
-  message(FATAL_ERROR "Download failed: ${ZIG_DOWNLOAD_ERROR}")
-endif()
+  if(NOT ZIG_DOWNLOAD_RESULT EQUAL 0)
+    message(FATAL_ERROR "Download failed: ${ZIG_DOWNLOAD_ERROR}")
+  endif()
 
-if(NOT EXISTS ${ZIG_PATH}/${ZIG_EXE})
-  message(FATAL_ERROR "Executable not found: \"${ZIG_PATH}/${ZIG_EXE}\"")
+  if(NOT EXISTS ${ZIG_PATH}/${ZIG_EXE})
+    message(FATAL_ERROR "Executable not found: \"${ZIG_PATH}/${ZIG_EXE}\"")
+  endif()
 endif()
 
 # Tools like VSCode need a stable path to the zig executable, on both Unix and Windows
diff '--color=auto' -urp bun-bun-v1.3.5.orig/cmake/scripts/GitClone.cmake bun-bun-v1.3.5/cmake/scripts/GitClone.cmake
--- bun-bun-v1.3.5.orig/cmake/scripts/GitClone.cmake	2025-12-17 00:52:16.000000000 -0800
+++ bun-bun-v1.3.5/cmake/scripts/GitClone.cmake	2025-12-24 13:29:33.002579854 -0800
@@ -22,23 +22,26 @@ endif()
 
 set(GIT_DOWNLOAD_URL https://github.com/${GIT_REPOSITORY}/archive/${GIT_REF}.tar.gz)
 
-message(STATUS "Cloning ${GIT_REPOSITORY} at ${GIT_REF}...")
-execute_process(
-  COMMAND
-    ${CMAKE_COMMAND}
-      -DDOWNLOAD_URL=${GIT_DOWNLOAD_URL}
-      -DDOWNLOAD_PATH=${GIT_PATH}
-      -DDOWNLOAD_FILTERS=${GIT_FILTERS}
-      -P ${CMAKE_CURRENT_LIST_DIR}/DownloadUrl.cmake
-  ERROR_STRIP_TRAILING_WHITESPACE
-  ERROR_VARIABLE
-    GIT_ERROR
-  RESULT_VARIABLE
-    GIT_RESULT
-)
-
-if(NOT GIT_RESULT EQUAL 0)
-  message(FATAL_ERROR "Clone failed: ${GIT_ERROR}")
+if(NOT OFFLINE)
+  message(STATUS "Cloning ${GIT_REPOSITORY} at ${GIT_REF}...")
+  execute_process(
+    COMMAND
+      ${CMAKE_COMMAND}
+        -DDOWNLOAD_URL=${GIT_DOWNLOAD_URL}
+        -DDOWNLOAD_PATH=${GIT_PATH}
+        -DDOWNLOAD_FILTERS=${GIT_FILTERS}
+        -P ${CMAKE_CURRENT_LIST_DIR}/DownloadUrl.cmake
+    ERROR_STRIP_TRAILING_WHITESPACE
+    ERROR_VARIABLE
+      GIT_ERROR
+    RESULT_VARIABLE
+      GIT_RESULT
+  )
+  if(NOT GIT_RESULT EQUAL 0)
+    message(FATAL_ERROR "Clone failed: ${GIT_ERROR}")
+  endif()
+else()
+  message(STATUS "Using cached download for ${GIT_DOWNLOAD_URL}...")
 endif()
 
 file(GLOB_RECURSE GIT_PATCH_PATHS ${CMAKE_SOURCE_DIR}/patches/${GIT_NAME}/*)
diff '--color=auto' -urp bun-bun-v1.3.5.orig/cmake/targets/BuildBun.cmake bun-bun-v1.3.5/cmake/targets/BuildBun.cmake
--- bun-bun-v1.3.5.orig/cmake/targets/BuildBun.cmake	2025-12-24 13:26:07.055581122 -0800
+++ bun-bun-v1.3.5/cmake/targets/BuildBun.cmake	2025-12-24 13:29:39.372078634 -0800
@@ -773,6 +773,7 @@ register_command(
     "Download node ${NODEJS_VERSION} headers"
   COMMAND
     ${CMAKE_COMMAND}
+      -DOFFLINE=${OFFLINE}
       -DDOWNLOAD_PATH=${NODEJS_HEADERS_PATH}
       -DDOWNLOAD_URL=https://nodejs.org/dist/v${NODEJS_VERSION}/node-v${NODEJS_VERSION}-headers.tar.gz
       -P ${CWD}/cmake/scripts/DownloadUrl.cmake
diff '--color=auto' -urp bun-bun-v1.3.5.orig/CMakeLists.txt bun-bun-v1.3.5/CMakeLists.txt
--- bun-bun-v1.3.5.orig/CMakeLists.txt	2025-12-17 00:52:16.000000000 -0800
+++ bun-bun-v1.3.5/CMakeLists.txt	2025-12-24 13:29:32.965873060 -0800
@@ -29,6 +29,7 @@ include(SetupLLVM)
 
 parse_package_json(VERSION_VARIABLE DEFAULT_VERSION)
 optionx(VERSION STRING "The version of Bun" DEFAULT ${DEFAULT_VERSION})
+optionx(OFFLINE BOOL "Use offline downloads" DEFAULT ON)
 project(Bun VERSION ${VERSION})
 
 # Bun uses C++23, which is compatible with BoringSSL's C++17 requirement
