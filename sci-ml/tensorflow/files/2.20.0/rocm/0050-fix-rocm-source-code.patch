# Split patch of original patch
Original patch:  https://gist.githubusercontent.com/raw/ed891528aacf0c5baf3a789e5e9aaead
Context:  https://bugs.gentoo.org/705712#c29
--- a/tensorflow/compiler/mlir/tools/kernel_gen/transforms/gpu_kernel_to_blob_pass.cc.orig	2024-03-05 16:30:15.000000000 -0800
+++ b/tensorflow/compiler/mlir/tools/kernel_gen/transforms/gpu_kernel_to_blob_pass.cc	2024-03-13 15:52:23.315464566 -0700
@@ -230,7 +230,8 @@ class GpuKernelToBlobPass
           "compute_)");
     }
     int arch;
-    if (!absl::SimpleAtoi(consumable_arch, &arch)) {
+    absl::SimpleAtoi(consumable_arch, &arch);
+    if (arch <= 0) {
       return tensorflow::errors::Internal(
           "Could not parse cuda architecture number");
     }
